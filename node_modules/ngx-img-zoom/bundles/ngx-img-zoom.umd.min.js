!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-img-zoom",["exports","@angular/core","@angular/common"],t):t((e=e||self)["ngx-img-zoom"]={},e.ng.core,e.ng.common)}(this,function(e,t,i){"use strict";var s=function(){function e(){this.zoomMode=0}return e.prototype.setZoomMode=function(e){this.zoomMode=e},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[]},e}(),n=function(){function e(e,t){this.renderer=e,this.ngxZoomService=t,this.hide=!0,this._triggerAnimationIn=!1,this.notFirstTime=!1,this.zoomMode=this.ngxZoomService.zoomMode}return Object.defineProperty(e.prototype,"_imgSrc",{set:function(e){this.zoomImage=e,!0===this.notFirstTime&&this.renderer.setStyle(this.result,"backgroundImage","url('"+e+"')"),this.notFirstTime=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_zoomImage",{set:function(e){this.previewImage=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.img=this.imgElmRef.nativeElement,this.result=this.resultElmRef.nativeElement,this.container=this.containerElmRef.nativeElement,this.renderer.setAttribute(this.img,"style",this.imgStyle),this.renderer.setAttribute(this.result,"style",this.resultStyle),this.renderer.setAttribute(this.container,"style",this.containerStyle),this.imageZoom(),this.renderer.setStyle(this.lens,"visibility","hidden")},e.prototype.imageZoom=function(){this.lens=this.renderer.createElement("DIV"),this.renderer.addClass(this.lens,"img-zoom-lens"),this.renderer.setAttribute(this.lens,"style",this.lensStyle),this.renderer.insertBefore(this.img.parentElement,this.lens,this.img),this.cx=this.result.offsetWidth/this.lens.offsetWidth,this.cy=this.result.offsetHeight/this.lens.offsetHeight,this.renderer.setStyle(this.result,"backgroundImage","url('"+this.zoomImage+"')"),this.renderer.setStyle(this.result,"backgroundSize",this.img.width*this.cx+"px "+this.img.height*this.cy+"px"),this.renderer.listen(this.lens,"mousemove",this.moveLens.bind(this)),this.renderer.listen(this.img,"mousemove",this.moveLens.bind(this)),this.renderer.listen(this.img,"touchmove",this.moveLens.bind(this)),this.renderer.listen(this.lens,"touchmove",this.moveLens.bind(this))},e.prototype.moveLens=function(e){var t,i,s;e.preventDefault(),i=(t=this.getCursorPos(e)).x-this.lens.offsetWidth/2,s=t.y-this.lens.offsetHeight/2,i>this.img.width-this.lens.offsetWidth?(i=this.img.width-this.lens.offsetWidth,this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")):(this.hide=!1,this.renderer.setStyle(this.lens,"visibility","visible")),i<0&&(i=0,this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")),s>this.img.height-this.lens.offsetHeight&&(s=this.img.height-this.lens.offsetHeight,this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")),s<0&&(s=0,this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")),this.renderer.setStyle(this.lens,"left",i+"px"),this.renderer.setStyle(this.lens,"top",s+"px"),this.renderer.setStyle(this.result,"backgroundPosition","-"+i*this.cx+"px -"+s*this.cy+"px")},e.prototype.getCursorPos=function(e){var t,i=0,s=0;return e=e||window.event,t=this.img.getBoundingClientRect(),i=e.pageX-t.left,s=e.pageY-t.top,{x:i-=window.pageXOffset,y:s-=window.pageYOffset}},e.prototype.handleMouseLeave=function(){this.hide=!0,this.renderer.setStyle(this.lens,"visibility","hidden")},e.decorators=[{type:t.Component,args:[{selector:"ngx-img-zoom",template:'<div  class="img-zoom-container" #container>\n    <img id="myimage" [src]="previewImage" #img (mouseleave)="handleMouseLeave()">\n    <div  [ngClass]="{\'hide\': hide}" \n        id="myresult" \n        class="img-zoom-result" \n        #result>\n    </div>\n</div>  ',styles:["*{box-sizing:border-box}.img-zoom-container{position:absolute}.img-zoom-lens{position:absolute;border:1px solid #d4d4d4;width:40px;height:40px}.img-zoom-result{border:1px solid #d4d4d4;width:300px;height:300px}.hide{visibility:hidden}"]}]}],e.ctorParameters=function(){return[{type:t.Renderer2},{type:s}]},e.propDecorators={imgElmRef:[{type:t.ViewChild,args:["img"]}],resultElmRef:[{type:t.ViewChild,args:["result"]}],containerElmRef:[{type:t.ViewChild,args:["container"]}],imgStyle:[{type:t.Input}],resultStyle:[{type:t.Input}],lensStyle:[{type:t.Input}],containerStyle:[{type:t.Input}],_imgSrc:[{type:t.Input,args:["zoomImageSrc"]}],_zoomImage:[{type:t.Input,args:["previewImageSrc"]}]},e}(),r=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],providers:[s],declarations:[n],exports:[n]}]}],e}();e.NgxImgZoomComponent=n,e.NgxImgZoomModule=r,e.NgxImgZoomService=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-img-zoom.umd.min.js.map